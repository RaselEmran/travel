!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){e.extend(!0,e.summernote.lang,{"en-US":{aceCodeEditor:{aceCodeEditor:"Code"}},"zh-CN":{aceCodeEditor:{aceCodeEditor:"代码"}}}),e.extend(e.summernote.plugins,{aceCodeEditor:function(o){var t=this,i=e.summernote.ui,a=o.layoutInfo.editor,n=o.options,d=n.langInfo;this.editor="",this.getOpts=function(){var e={aceTheme:o.options.ace.aceTheme||"ace/theme/twilight",aceMode:o.options.ace.aceMode||"c_cpp",aceLineHeight:o.options.ace.aceLineHeight||"18px",aceFontSize:o.options.ace.aceFontSize||"12px",aceModeSelectorLabel:o.options.ace.aceModeSelectorLabel||"select your language",aceCodeInputAreaLabel:o.options.ace.aceCodeInputAreaLabel||"input your code",aceCodeSubmitBtnLabel:o.options.ace.aceCodeSubmitBtnLabel||"Insert",aceModalTitle:o.options.ace.aceModalTitle||"Insert Code",aceModes:o.options.ace.aceModes||["c/c++","java","javascript","perl","python","php","ruby","sh","golang","julia","rust","scala","haskell","lisp","lua","sql","coffee","typescript"]};return e},this.showInsertCodeDialog=function(a){return this.editor.focus(),e.Deferred(function(n){var d=e("#aceInsertCode"),c=e("#modeSelector"),r=a.aceMode,s=a.aceTheme,l=a.aceLineHeight,p=a.aceFontSize;i.onDialogShown(t.$dialog,function(){o.triggerEvent("dialog.shown"),c.one("change",function(e){r=e.target.value,"c/c++"===r&&(r="c_cpp"),t.editor.session.setMode("ace/mode/"+r)}),d.one("click",function(e){e.preventDefault(),n.resolve({code:t.editor.getSession().getValue(),aceMode:r,aceTheme:s,aceLineHeight:l,aceFontSize:p}),t.$dialog.modal("hide")})}),i.onDialogHidden(t.$dialog,function(){d=null,c=null,"pending"===n.state()&&n.reject()}),i.showDialog(t.$dialog)}).promise()},this.createNode=function(o){var t=e("<pre />");return t.html(o),t[0]},this.show=function(){var e=t.getOpts();o.invoke("editor.saveRange"),this.showInsertCodeDialog(e).then(function(e){o.invoke("editor.restoreRange");var i=t.createNode(e.code),a=ace.edit(i);a.setTheme(e.aceTheme),a.session.setMode("ace/mode/"+e.aceMode),a.getSession().setValue(e.code),a.getSession().setUseWorker(!1),a.setReadOnly(!0),a.$blockScrolling=1/0,a.setShowPrintMargin(!1),a.setHighlightActiveLine(!1),a.renderer.$cursorLayer.element.style.display="none",a.renderer.$gutterLineHighlight.style.display="none",a.renderer.$gutterLayer.$showFoldWidgets=!1;var n=a.session.getLength();i.style.lineHeight=e.aceLineHeight,i.style.fontSize=e.aceFontSize,i.style.height=parseInt(i.style.lineHeight)*n+5+"px",o.invoke("editor.insertNode",i)})},o.memo("button.aceCodeEditor",function(){var e=i.button({contents:'<i class="fa fa-code"/>'+d.aceCodeEditor.aceCodeEditor,tooltip:d.aceCodeEditor.aceCodeEditor,click:function(){t.show()}}),o=e.render();return o}),this.createCodeDialog=function(){for(var o=e("<div />"),t=e('<div class="form-group" />'),i=e('<div class="form-group" />'),a=e('<select class="form-control ace-plugin-select" id="modeSelector" />'),n=this.getOpts(),d=n.aceModes,c=0;c<d.length;c++)a.append('<option value="'+d[c]+'">'+d[c]+"</option>");var r=e("<label />");r.html(n.aceModeSelectorLabel),o.append(t.append(r)),o.append(t.append(a));var r=e("<label />");r.html(n.aceCodeInputAreaLabel);var s=e('<div class="ace-plugin-code" id="aceCodeEditor" />');return o.append(i.append(r)),o.append(i.append(s)),o.html()},this.initialize=function(){var o=this.getOpts(),d=n.dialogsInBody?e(document.body):a,c='<button type="button" class="btn btn-primary" id="aceInsertCode">'+o.aceCodeSubmitBtnLabel+"</button>";this.$dialog=i.dialog({className:"code-dialog",title:o.aceModalTitle,fade:n.dialogsFade,body:t.createCodeDialog(),footer:c}).render().appendTo(d),this.editor=ace.edit("aceCodeEditor"),this.editor.setTheme(o.aceTheme),this.editor.session.setMode("ace/mode/"+o.aceMode),this.editor.$blockScrolling=1/0,this.editor.setShowPrintMargin(!1)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()}}})});